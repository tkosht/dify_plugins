{
  "$schema": "https://json.schemastore.org/claude-code-settings.json",
  "permissions": {
    "allow": [
      "Bash(ls:*)",
      "Bash(find:*)",
      "Bash(git add:*)",
      "Bash(git commit:*)",
      "Bash(git checkout:*)",
      "Bash(git push:*)",
      "Bash(gh pr create:*)",
      "Bash(gh pr:*)",
      "Bash(git pull:*)",
      "Bash(git branch:*)",
      "mcp__serena__onboarding",
      "mcp__serena__list_dir",
      "mcp__serena__read_file",
      "mcp__serena__find_file",
      "mcp__serena__write_memory",
      "mcp__serena__list_memories",
      "mcp__serena__activate_project",
      "mcp__serena__execute_shell_command",
      "Bash(uv run ruff check:*)",
      "Bash(uv run black:*)",
      "Skill(tasks:mainbranch)",
      "Bash(wc:*)",
      "WebFetch(domain:docs.dify.ai)",
      "WebSearch",
      "WebFetch(domain:tenacity.readthedocs.io)",
      "WebFetch(domain:towardsdatascience.com)",
      "Bash(uv run pytest:*)",
      "Bash(git fetch:*)",
      "mcp__codex-cli__ping",
      "mcp__codex-cli__help",
      "mcp__codex-cli__codex",
      "mcp__codex-cli__listSessions",
      "Bash(codex --version:*)",
      "Bash(codex exec \"What is 2+2? Reply with just the number.\")",
      "Bash(codex exec:*)",
      "Bash(xargs:*)",
      "mcp__serena__initial_instructions",
      "mcp__serena__check_onboarding_performed",
      "Bash(codex --help:*)",
      "mcp__sequential-thinking__sequentialthinking",
      "Bash(codex e --help:*)",
      "Bash(tee:*)",
      "Bash(uv run python:*)",
      "Bash(timeout 30 uv run:*)",
      "mcp__serena__get_current_config",
      "mcp__serena__get_symbols_overview",
      "mcp__serena__search_for_pattern",
      "mcp__serena__find_symbol",
      "Skill(codex-subagent)",
      "mcp__serena__replace_content",
      "Bash(timeout 0.2s rg:*)",
      "Bash(uv run python3:*)",
      "Bash(command -v:*)",
      "Bash(export PROMPT='ROLE: Consistency Checker for ai-agent-collaboration-exec\nDATE: 2026-01-11\n\nOBJECTIVE\nai-agent-collaboration-exec スキルのドキュメント・コード・テストの相互整合性を評価する。\n\n## 対象ファイル（これらのみを対象とすること）\n\n### ドキュメント（ai-agent-collaboration-exec）\n- .claude/skills/ai-agent-collaboration-exec/SKILL.md\n- .claude/skills/ai-agent-collaboration-exec/references/execution_framework.md\n- .claude/skills/ai-agent-collaboration-exec/references/subagent_prompt_templates.md\n- .claude/skills/ai-agent-collaboration-exec/references/pipeline_spec_template.json\n- .claude/skills/ai-agent-collaboration-exec/references/contract_output.md\n\n### コード（codex-subagent 実行エンジン）\n- .claude/skills/codex-subagent/SKILL.md\n- .claude/skills/codex-subagent/scripts/codex_exec.py\n- .claude/skills/codex-subagent/schemas/pipeline_spec.schema.json\n- .claude/skills/codex-subagent/schemas/capsule.schema.json\n- .claude/skills/codex-subagent/schemas/stage_result.schema.json\n\n### テスト\n- tests/codex_subagent/test_pipeline_spec.py\n- tests/codex_subagent/test_pipeline_schema.py\n- tests/codex_subagent/test_pipeline_execute.py\n- tests/codex_subagent/test_pipeline_integration.py\n\n## チェック項目（以下の4点を評価）\n\n1. **SKILL.md と references の内部整合**\n   - SKILL.md で参照している references が全て存在するか\n   - references の内容が SKILL.md の記述と矛盾しないか\n   - 役割分担（Executor/Reviewer/Verifier/Releaser）の定義が一貫しているか\n\n2. **codex-subagent との連携仕様整合**\n   - ai-agent-collaboration-exec が前提とする codex-subagent の機能が実際に存在するか\n   - pipeline_spec_template.json が codex-subagent の schemas に適合するか\n   - allowed_stage_ids の定義が整合しているか\n\n3. **スキーマとテンプレートの整合**\n   - pipeline_spec_template.json が pipeline_spec.schema.json に適合するか\n   - Capsule 構造（/draft, /critique, /revise, /facts 等）が capsule.schema.json と整合するか\n   - stage_result の期待形式がドキュメントとスキーマで一致しているか\n\n4. **テストカバレッジの評価**\n   - 主要機能がテストでカバーされているか\n   - ドキュメントに記載された仕様がテストで検証されているか\n   - 欠落しているテストケースがあれば特定する\n\n## 出力形式\n各チェック項目について:\n- 整合: YES / NO / PARTIAL\n- 根拠: ファイル名:行番号\n- ギャップ: 不整合の具体的内容（あれば）\n\n## CONSTRAINTS\n- MCP 不可、外部 Web 不可、破壊的コマンド禁止\n- 事実ベースで記述。不明は \"\"Unknown\"\" と明記\n- /facts はオブジェクト配列（文字列禁止）\n- /draft /critique /revise はオブジェクトのまま\n- JSON Patch は add/replace/remove のみ\n\n## CAPSULE PATCH RULES\n- /facts はオブジェクト配列。例: {\"\"op\"\":\"\"add\"\",\"\"path\"\":\"\"/facts/-\"\",\"\"value\"\":{\"\"type\"\":\"\"file_check\"\",\"\"path\"\":\"\"...\"\",\"\"result\"\":\"\"...\"\"}}\n- /draft /critique /revise はオブジェクト。例: {\"\"op\"\":\"\"replace\"\",\"\"path\"\":\"\"/draft\"\",\"\"value\"\":{\"\"summary\"\":\"\"...\"\",\"\"details\"\":[...]}}')",
      "Bash(__NEW_LINE__ uv run python .claude/skills/codex-subagent/scripts/codex_exec.py --mode pipeline --pipeline-spec docs/ai-agent-reviews/ai-agent-collaboration-exec_consistency_pipeline_spec_2026-01-11.json --capsule-store auto --sandbox read-only --timeout 600 --json --prompt \"$PROMPT\")"
    ],
    "deny": []
  },
  "enableAllProjectMcpServers": true,
  "enabledMcpjsonServers": [
    "sequential-thinking",
    "serena"
  ]
}
